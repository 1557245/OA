<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>修改密码</title>
<link rel="stylesheet" th:href="@{/bootstrap/css/bootstrap.min.css}" />
<style type="text/css">
.myDiv {
    width: 400px;
    height: 200px;
    border: 1px solid #5e5e5e;
    top: 50%;
    left: 50%;
    margin-top: -100px;
    margin-left: -150px;
    position: absolute;
    border-radius: 5px;
}
</style>

</head>
<body>
    <div class="myDiv">
        <div class="row-fluid">
            <form class="form-horizontal" target="_top" method="post" action="/user/updatepassword" style="padding: 15px;" onsubmit="return validation()">
                <div class="form-group">
                  <label class="col-sm-3 control-label" for="pwd">原始密码</label>
                    <div class="col-sm-8">
                        <input type="password" class="form-control" name="oldpwd" id="oldpwd" th:if="${oldpwd == null}" placeholder="请输入原始密码">
                        <input type="password" class="form-control" name="oldpwd" id="oldpwd" th:if="${oldpwd != null}" th:value="${oldpwd}">
                    </div>
                </div>
                 <div class="form-group">
                    <label class="col-sm-3 control-label" for="pwd">新密码</label>
                    <div class="col-sm-8">
                        <input type="password" class="form-control" name="newpwd" id="newpwd" th:if="${newpwd == null}" placeholder="请输入新密码">
                        <input type="password" class="form-control" name="newpwd" id="newpwd" th:if="${newpwd != null}" th:value="${newpwd}">
                    </div>
                </div>
                <div class="form-group">
                    <label class="col-sm-3 control-label" for="pwd">确认密码</label> 
                    <div class="col-sm-8">
                        <input type="password" class="form-control" name="confim" id="confim" th:if="${confim == null}" placeholder="请再次输入新密码">
                        <input type="password" class="form-control" name="confim" id="confim" th:if="${confim != null}" th:value="${confim}">
                    </div>
                </div>
              <div class="row">
                    <div class="col-sm-12" style="text-align: center;">
                        <button type="submit" id="change" class="btn btn-primary">确认修改</button>
                    </div>
                </div> 
            </form>
            <p style="color: red;text-align: center;"></p>
        </div>
    </div>
    <input type="hidden" id="msg" th:if="${msg != null}" th:value="${msg}"/>
</body>
<script type="text/javascript" th:src="@{/js/jquery-2.2.3.min.js}"></script>
<script type="text/javascript" th:src="@{/bootstrap/js/bootstrap.min.js}"></script>
<script type="text/javascript">
	$(function(){
		var msg=$("#msg").val();
		if($.trim(msg)){
			alert(msg);
		}
		/* $("#change").click(function () {
	        $("form").attr("target", "_top");
	    }); */
	});
    //校验新密码和旧密码
    function validation(){
        var oldpwd = $("#oldpwd").val();
        var newpwd = $("#newpwd").val();
        var confim = $("#confim").val();
        if(oldpwd==' '||oldpwd==null||oldpwd==''){
            alert("请输入原始密码");
            return false;
        }
        if(newpwd==' '||newpwd==null||newpwd==''){
            alert("请输入新密码");
            return false;
        }
        if(newpwd.equals(oldpwd)){
        	alert("新密码与原始密码不能一样");
            return false;
        }
        if(newpwd != confim){
            alert("密码不一致");
            return false;
        }
        alert("这里")
        $("form").attr("target", "_top");
        return true;
    }
</script>
</html>